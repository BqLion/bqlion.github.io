<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="http://bqlab-pic.test.upcdn.net/myicon.png">
  <link rel="icon" type="image/png" href="http://bqlab-pic.test.upcdn.net/myicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="desc">
  <meta name="author" content="LiuBingqian">
  <meta name="keywords" content="">
  <title>3.课程/数据库_概论 ~ 刘秉乾的技术博客 :)</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >

<link rel="stylesheet" href="/css/main.css"  >


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"  >


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 100vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>LiuBingqian`s Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">主页</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">分类</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">所有文章</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">标签</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">关于</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2" id="background"
         style="background: url('http://bqlab-pic.test.upcdn.net/archive.jpg')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              
                <p class="mt-3">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp;
                  星期一, 二月 24日 2020, 12:04 中午
                </p>
              

              <p>
                
                  
                  &nbsp;<i class="far fa-chart-bar"></i>
                  <span class="post-count">
                    4.4k 字
                  </span>&nbsp;
                

                
                  
                  &nbsp;<i class="far fa-clock"></i>
                  <span class="post-count">
                      16 分钟
                  </span>&nbsp;
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp;
                  <span id="busuanzi_container_page_pv">
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>&nbsp;
                
              </p>
            
          </div>

          
            <div class="scroll-down-bar">
              <i class="fas fa-angle-down scroll-down-arrow"></i>
            </div>
          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <h1 id=""><a href="#" class="headerlink" title=""></a></h1><h2 id="1-数据库的四个基本概念"><a href="#1-数据库的四个基本概念" class="headerlink" title="1.数据库的四个基本概念"></a>1.数据库的四个基本概念</h2><ul>
<li><p>数据语义</p>
<ul>
<li>“93”的语义<ul>
<li>可以是年龄</li>
<li>也可以是班级人数</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>数据和自然语言</p>
<ul>
<li><p>自然语言可以通过上下文完整描述事物</p>
</li>
<li><p>数据是计算机的记录:</p>
<ul>
<li><p>(李明,男,199005,江苏南京,计算机,自行车协会)</p>
<p>记录不能完整表达事物内容,因缺少语义(列信息)</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>什么是数据库<ul>
<li>长期储存在计算机内,有组织的,可共享的大量数据集合</li>
</ul>
</li>
<li>为什么要建立数据库<ul>
<li>可收集所需的大量数据,然后进一步加工处理,转换为有用的知识</li>
</ul>
</li>
<li>数据库的基本特征<ul>
<li>数据按照一定的数据模型(结构)存储,组织,描述</li>
<li>冗余度小,可扩展</li>
<li>数据独立性高</li>
</ul>
</li>
<li>什么是数据库管理系统DBMS<ul>
<li>位于用户和操作系统之间的一层数据管理软件</li>
<li>基础软件,也是一层服务</li>
</ul>
</li>
<li>DBMS的用途<ul>
<li>科学的组织和存储数据,高效的获取和维护数据 </li>
</ul>
</li>
<li>DBMS的主要功能<ul>
<li>数据定义功能<ul>
<li>提供数据定义语言DDL</li>
<li>定于数据库中的数据对象</li>
</ul>
</li>
<li>数据组织/存储/管理<ul>
<li>管理数据</li>
<li>确定数据在存储级别上的结构和存取方式</li>
<li>实现数据之间的联系</li>
<li>提供多种存储方法提高存储效率</li>
</ul>
</li>
<li>数据操纵功能<ul>
<li>增删改查</li>
<li>提供数据操纵语言(DML)<ul>
<li>关系代数</li>
<li>关系演算</li>
<li>SQL</li>
</ul>
</li>
</ul>
</li>
<li>数据库的事务管理和运行管理<ul>
<li>数据的安全,高并发管理</li>
<li>故障恢复</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-数据模型"><a href="#2-数据模型" class="headerlink" title="2.数据模型"></a>2.数据模型</h2><ul>
<li>数据模型应满足三个特点<ul>
<li>能真实模拟现实世界</li>
<li>容易理解</li>
<li>易在计算机实现</li>
</ul>
</li>
<li>数据模型是数据库系统的核心和基础</li>
</ul>
<p>两类数据模型</p>
<ul>
<li>概念模型<ul>
<li>用户视角,用于数据库设计</li>
</ul>
</li>
<li>逻辑模型和物理模型<ul>
<li>逻辑模型<ul>
<li>计算机视角,用于DBMS的实现</li>
</ul>
</li>
<li>物理模型<ul>
<li>描述数据在系统内的表示方法和存取方法,是对数据底层的抽象</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>三层建模</p>
<ul>
<li>现实世界–&gt;概念模型<ul>
<li>人类的认识抽象,概念模型只是形成概念,计算机不懂</li>
<li>由数据库设计人员完成</li>
</ul>
</li>
<li>概念模型–&gt;逻辑模型<ul>
<li>把概念转换为计算机可读的逻辑模型</li>
<li>由数据库设计人员完成</li>
</ul>
</li>
<li>逻辑模型–&gt;物理模型<ul>
<li>把逻辑转换为物理执行方案</li>
<li>由DBMS完成</li>
</ul>
</li>
</ul>
<h2 id="3-常用的数据模型"><a href="#3-常用的数据模型" class="headerlink" title="3.常用的数据模型"></a>3.常用的数据模型</h2><ul>
<li>层次模型</li>
<li>网状模型</li>
<li>关系模型(现在最常用的模型)</li>
<li>面向对象数据模型</li>
<li>对象关系数据模型</li>
<li>半结构化数据模型</li>
<li>非结构化数据模型,图模型</li>
</ul>
<p>关系模型</p>
<ul>
<li>在用户观点下,关系模型中数据的逻辑结构是一张二维表</li>
<li>概念<ul>
<li>关系(Relation)   —-一个关系对应一张表</li>
<li>元组(Tuple)        —-表中的一行就是一个元组</li>
<li>属性(Attribute)  —-表中的一列为一个属性</li>
<li>主键(Key])           —-表中的属性组,可唯一确定一个元组</li>
<li>域(Domain)        —-一组具有相同数据结构类型的值的集合,属性的取值范围来自某个域<ul>
<li>​    域的举例:<ul>
<li>一个属性的全集,例如学校的系名的域就是全部系</li>
</ul>
</li>
</ul>
</li>
<li>关系模型—对关系的描述<ul>
<li>学生(学号,姓名,年龄,性别,系名,年级等)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-数据库系统的结构"><a href="#4-数据库系统的结构" class="headerlink" title="4.数据库系统的结构"></a>4.数据库系统的结构</h2><ul>
<li><p>数据库开发人员角度:</p>
<ul>
<li><p>模式Schema的概念</p>
<ul>
<li><p>是对数据库逻辑结构和特征的描述</p>
</li>
<li><p>是类的描述,不涉及具体值</p>
<ul>
<li>模式是稳定的</li>
</ul>
</li>
<li><p>模式举例:学生选课数据库</p>
</li>
<li><p>模式类比：数据库是仓库，模式是一个个房间，表格是房间里的床。</p>
<p>用户的权限的对房间分配，不对床分配</p>
<ul>
<li>学生,课程,学生选的课三个关系模式(三张表)<ul>
<li>学生表Student(Sno,Sname,Ssex,Sage,Sdept)</li>
<li>课程表Coursera(Cno,Cname,Cpno,Ccredit)</li>
<li>学生选课表SC(SNo,Cno,Grade)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>实例(instance)</p>
<ul>
<li>数据库某时刻的状态,模式的一个具体值</li>
<li>同一个模式有很多实例</li>
<li>实例举例:学生选课数据库实例<ul>
<li>2014年的学生数据库实例<ul>
<li>2014年学校所有学生的记录</li>
</ul>
</li>
<li>2013年的学生数据库实例<ul>
<li>2013年学校所有开设的所有课程的记录</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>从数据库用户角度看:</p>
<ul>
<li>单用户结构</li>
<li>分布式结构</li>
<li>客户-服务器结构</li>
<li>浏览器-数据服务器结构</li>
</ul>
</li>
</ul>
<ul>
<li>数据库三级模式(schema)结构,是数据库系统内部系统结构<ul>
<li>(中)模式<ul>
<li>数据库中全体数据的逻辑结构和特征的描述</li>
<li>所有用户的公共数据视图</li>
<li>定义模式<ul>
<li>DDL定义数据的逻辑结构,以某种数据模型为基础</li>
<li>定义数据之间的联系</li>
<li>定义数据的完整性/安全性</li>
</ul>
</li>
</ul>
</li>
<li>外模式<ul>
<li>又称子模式/用户模式<ul>
<li>外模式是模式的子集,通常是与某一应用有关的数据的逻辑表示</li>
<li>通常可以有多个外模式</li>
</ul>
</li>
</ul>
</li>
<li>内模式<ul>
<li>是数据物理结构和存储方式的描述</li>
<li>是数据在数据库内部的表示方式<ul>
<li>记录的存储方式    <ul>
<li>例如顺序存储,堆存储,hash存储等</li>
</ul>
</li>
<li>索引的组织方式<ul>
<li>B+树,Bitmap,Hash等</li>
</ul>
</li>
<li>数据是否被压缩</li>
<li>数据是否被加密</li>
<li>数据存储记录的规定–如定长还是变长</li>
</ul>
</li>
<li>一个数据库只有一个内模式</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-关系代数"><a href="#5-关系代数" class="headerlink" title="5.关系代数"></a>5.关系代数</h2><p>1.选择select—&gt;取出满足条件的信息</p>
<p>2.投影—-&gt;列变换</p>
<p>3.链接—&gt;  R(A@B)S  链接运算从R和S的广义笛卡尔积R*S中选取R关系在A属性组上的值与S关系在B属性组上的值满足比较关系@的元组</p>
<p>​                我的理解:R和S拼成一行,选取满足条件A@B的行</p>
<p>​                当@等于=时,即为等值链接,这种链接最常用</p>
<p>​                R(A=B)S :从关系R和S的广义笛卡尔积中选取A/B属性值相等的那些元组</p>
<p>​    悬浮元组:R和S元组在链接时有些公共属性上值不等的元组,导致这些元组在连接时被舍弃了,这些舍弃的元祖被成         为悬浮元组</p>
<p>外链接:如果把悬浮元组也保留在结果关系中,而在其他属性上填空值,就叫做外连接</p>
<p>左外连接:只保留左边关系R中的悬浮元祖</p>
<p>右外连接:只保留右边关系S中的悬浮元祖</p>
<p>​    </p>
<p>4.除运算</p>
<p>​    </p>
<h2 id="6-关系演算"><a href="#6-关系演算" class="headerlink" title="6.关系演算"></a>6.关系演算</h2><ul>
<li>关系演算以数理逻辑中的谓词演算为基础<ul>
<li>按谓词变元不同可以分为<ul>
<li>元祖关系演算<ul>
<li>以元祖变量作为谓词变量的 基本对象</li>
<li>元祖关系演算语言ALPHA</li>
</ul>
</li>
<li>域关系演算<ul>
<li>以与变量作为谓词变量的基本对象</li>
<li>域关系演算语言GBE</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-sql语言概述"><a href="#7-sql语言概述" class="headerlink" title="7.sql语言概述"></a>7.sql语言概述</h2><p>关系型数据库标准语言SQL</p>
<ul>
<li><p>关系代数太数学了,性能差接受度差,于是IBM开展了system R的研制工作</p>
<ul>
<li>system R 以关系模型为基础,但是摒弃了数学语言,以自然语言为方向,诞生了结构化英语查询语言<ul>
<li>Structed English Query  Language–&gt;SEQUEL</li>
<li>后来改名为SQL,发音不变,为seeQu</li>
</ul>
</li>
<li>目前为止,sql应用最为广泛,但是没有一个数据库能支持sql所有概念和特性</li>
</ul>
</li>
<li><p>Sql例子</p>
<ul>
<li><p>SELECT Sno,Grade</p>
<p>FROM SC</p>
<p>WHERE Cno = ‘3’</p>
<p>Order by Grade</p>
</li>
<li><p>在SC表中选取Cno=3的行,抽取除Sno和Grade成表,按照Grade排序</p>
</li>
</ul>
</li>
<li><p>SQL特点</p>
<ul>
<li>综合统一,集成了数据定义语言/数据操纵语言/数据控制语言为一体</li>
<li>可以独立完成数据库生命周期中的全部活动<ul>
<li>增删改查</li>
<li>维护</li>
<li>安全性完整性控制</li>
<li>嵌入式sql和动态sql定义</li>
</ul>
</li>
<li>高度非过程化:<ul>
<li>这对于面向过程的语言来说,不必指定路径,不必指定细节</li>
<li>它只要提出做什么,无需提出做的详细过程</li>
<li>例如做两个表的链接,不必说哪个表做外循环,哪个表做内循环,只用join就可以了</li>
</ul>
</li>
<li>面向集合的操作方式<ul>
<li>操作的对象,返回的对象都是元组/元组的集合</li>
<li>同一种语法结构提供多种使用方式<ul>
<li>独立性,可以独立地用于联机交互</li>
<li>嵌入性,又能够嵌入到高级语言C,C++,JAVA等中设计使用</li>
</ul>
</li>
</ul>
</li>
<li>功能实现只用了9个动词<ul>
<li>数据查询:select</li>
<li>数据定义:create,drop,alter</li>
<li>数据操纵:insert,update,delete</li>
<li>数据控制:grant,revoke</li>
</ul>
</li>
<li>sql支持数据库的三级模式结构<ul>
<li>视图                                外模式<ul>
<li>从一个或者几个基本表导出的表</li>
<li>数据库中只存放视图的定义不存放视图对应的数据</li>
<li>视图是一个虚表</li>
<li>用户可以在视图在再定义视图</li>
</ul>
</li>
<li>基本表                           模式<ul>
<li>本身独立存在的表</li>
<li>sql一个关系对应一个基本表</li>
<li>一个基本表对应一个存储文件</li>
<li>一个表可以带若干索引</li>
</ul>
</li>
<li>存储文件                       内模式<ul>
<li>物理结构对用户是隐藏的</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="8-sql数据定义"><a href="#8-sql数据定义" class="headerlink" title="8.sql数据定义"></a>8.sql数据定义</h2><ul>
<li><p>数据定义是对数据库中的各种对象进行创建的过程</p>
</li>
<li><p>数据库中有各种对象:</p>
<ul>
<li><p>模式</p>
</li>
<li><p>表</p>
</li>
<li><p>视图</p>
</li>
<li><p>索引等</p>
</li>
<li><p>sql的数据定义语句</p>
<table>
<thead>
<tr>
<th></th>
<th>创建</th>
<th>删除</th>
<th>修改</th>
</tr>
</thead>
<tbody><tr>
<td>模式(schema)</td>
<td>create schema</td>
<td>drop schema</td>
<td></td>
</tr>
<tr>
<td>表(table)</td>
<td>create table</td>
<td>drop table</td>
<td>alter table</td>
</tr>
<tr>
<td>视图(view)</td>
<td>create view</td>
<td>drop view</td>
<td></td>
</tr>
<tr>
<td>索引(index)</td>
<td>create index</td>
<td>drop index</td>
<td>alter index</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>数据定义详解</p>
<ul>
<li><p>模式定义</p>
<ul>
<li>模式就是一个目录(命名空间),在此模式中包含了数据库对象,例如基本表,视图,索引等<ul>
<li>创建:create schema “name”</li>
<li>删除:drpo schema <ul>
<li>drop schema “name”&lt;cascade&gt;级联删除<ul>
<li>删除schema时同时删除其中所有数据库对象</li>
</ul>
</li>
<li>drop schema “name”&lt;restrict&gt;限制删除<ul>
<li>如果该schema中有定义的对象(表,视图,索引等),则拒绝该语句的删除</li>
<li>仅当该模式中没有任何下属对象的时候才能执行</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>表定义</p>
<ul>
<li>表是关系数据库的核心<ul>
<li>create table&lt;表名&gt;</li>
</ul>
</li>
</ul>
</li>
<li><p>索引定义</p>
<ul>
<li><p>索引的目的:加快查询速度</p>
</li>
<li><p>关系数据库管理系统常见索引:</p>
<ul>
<li>顺序文件上的索引</li>
<li>B+树索引<ul>
<li>特点时可以动态平衡</li>
</ul>
</li>
<li>散列hash索引<ul>
<li>特点是速度快</li>
</ul>
</li>
<li>位图索引</li>
</ul>
</li>
<li><p>创建索引</p>
<ul>
<li>create &lt;unique&gt;&lt;cluster&gt;index&lt;索引名&gt;<ul>
<li>unique索引是否唯一</li>
<li>cluster是否是聚簇索引</li>
</ul>
</li>
<li>举例<ul>
<li>create unique index Stusno On Student(sno)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>  ## 9.数据查询

  * SELECT             指定要显示的属性列
  * from                   制定查询对象
  * where                制定查询条件
  * group by           对查询结果按指定列的值分组
  * order by            对查询结果按指定列值的升序或者降序排序





  * 别名

    * 使用列的别名改变查询结果中的列标题
    * SELECT Sname NAME,Year of birth BIRTH,

    ​                NAME,BIRTH就是别名

  ​                            

  * DISTINCT关键词取消重复的行
    * SELECT DISTINCT sno From SC
      * 执行结果
        * sno
        * 201215706
        * 201215707
      * 没有DISTINCT关键词的执行结果
        * sno
        * 201215706
        * 201215706
        * 201215706
        * 201215707
        * 201215707





  * 聚集函数
    * 统计个数count(*)
    * 计算一列值的总和sun
    * 计算一列值的平均值avg
    * 求一列值中的最大值和最小值
      * max
      * min



  ## 10.链接查询

  * 等值与非等值链接查询

    * 链接条件运算符是=

    * 例子

      * SELECT Student.\*,SC.\*

        From student,sc

        where student.sno=sc.sno

      * 链接操作的执行过程

        - 嵌套循环法

          - for表一{for{表二}}

        - 排序合并法sort-merge

          - 常用于等值链接

          - 按链接属性对表一表二进行排序

          - 设置指针,指向表一和表二的第一个元祖,如果这两个元祖满足链接条件就拼接,然后

            i++,j++

            否则

            i++,j不动或者

            j++,i不动

  * 自身链接

    * 一个表与自己链接

    * 由于所有属性都是同名属性,必须使用别名前缀

      * 例如

        * SELECT FIRST.Cname,SECOND.Cname

          FROM Coursera FIRST,Courera SECOND           取别名

          WHERE FIRST.Cpno = SECOND.Cno

  * 外链接

    * 普通链接只输出满足链接条件的元组

    * 外链接以指定表为链接主体,将主表中不满足链接条件的元组一起输出

    * 左链接

      * 列出左边关系中的所有元组

    * 右链接

      * 列出右边关系中的所有元组

    * 外链接举例

      * SELECT student.sno,Sname,Ssex,Sage,Sdept,Cno,Grade

        From Student LEFT OUT JOIN SC ON

        (Student.sno = SC.Sno)

      * 左链接以左表为主,左边满足匹配条件的就链接了,不满足匹配条件的也把左边的信息列出来,右边本该链接的地方空着

      * 右链接与左链接完全对称

  * 两个以上的表的链接

    * 举例

      * SELECT student.sno,Sname,Cname,Grade

        From Student,SC,Coursera     //有多个from就是链接

        WHERE Student.sno =SC.Sno

        And SC.Cno = Coursera.Cno;



  ## 10.嵌套查询

  嵌套查询概览

  * 一个 SELECT-FROM-WHERE语句称谓一个查询模块

  * 将一个查询模块嵌套在另一个查询模块where或者having中的查询称谓嵌套查询

  * 举例

    * SELECT Sname 

      from Student

      where sno in

      ​                    (select sno 

      ​                     from sc

      ​                     where Cno = &#39;2&#39; )

  * 上层的查询称为外查询,下层的查询称谓内查询

  * sql允许多层嵌套

  * 子查询不能使用order by



  * 不相关子查询
    * 子查询的查询条件不依赖于父查询
    * 由里向外逐层查询
  * 相关子查询
    * 相关子查询的查询条件依赖于父查询
      * 首先取外层查询中表的第一个元祖,根据它与内层查询相关的属性值处理内层查询
      * 若where子句返回值为真,则此元组放入结果表
      * 然后再取外层表的下一个元组





  * 带有in谓词的子查询

    * 举例

    * SELECT sno,sname,sdept

      from student 

      where sdept IN

      ​                            (select sdept

      ​                            from student 

      ​                             where sname = &#39;刘成&#39;)

      此例为不相关子查询

  * 带有比较运算的子查询

  * 带有any(some)或者all的子查寻

    * 例子:查询非计算机系中比计算机系任意一个学生年龄小的学生姓名和年龄

      SELECT Sname,Sage

      From Student

      where Sage &lt; ANY(SELECT Sage

      ​                                        FROM Student 

      ​                                        where Sdept  = &#39;CS&#39;)

      处理过程:

      首先计算子查询,得到一个结果集合(19,20)

      然后求出Sage小于任何(19,20)也就是19的所有集合

  * 带有exist的子查询

    * 是个存在量词
    * 带有exist的查询不返回任何数据只返回true或者false</code></pre><h2 id="11-集合查询"><a href="#11-集合查询" class="headerlink" title="11.集合查询"></a>11.集合查询</h2><ul>
<li>集合操作的种类<ul>
<li>并操作union</li>
<li>交操作intersect</li>
<li>差操作except</li>
</ul>
</li>
<li>参加集合操作的各查询结果的列数必须相同,对应的数据类型也必须相同</li>
</ul>
<ul>
<li><p>union举例</p>
<ul>
<li><p>查询计算机科学系的学生,以及年龄不大于19岁的学生</p>
</li>
<li><p>SELECT * </p>
<p>FROM Student</p>
<p>WHERE Sdept  = ‘CS’</p>
<p>UNION </p>
<p>Select *</p>
<p>FROM     Student </p>
<p>WHERE Sage &lt;= 19;</p>
<p>两个查询用union合并</p>
<ul>
<li>union可以自动合并重复的元素</li>
<li>union all会保留重复的元素</li>
</ul>
</li>
</ul>
</li>
<li><p>intersect交集举例</p>
<ul>
<li><p>查询计算机的学生和年龄不大于19岁的学生的交集</p>
</li>
<li><p>SELECT *</p>
<p>from Student</p>
<p>where Sdept  = ‘CS’</p>
<p>INTERSECT </p>
<p>SELECT *</p>
<p>FROM Student </p>
<p>WHERE Sage &lt;= 19</p>
</li>
</ul>
</li>
<li><p>except差集举例</p>
<ul>
<li><p>查询计算机的学生和年龄不大于19岁的学生的差集</p>
<p>SELECT * </p>
<p>From Student </p>
<p>where Sdept = ‘CS’</p>
<p>EXCEPT </p>
<p>SELECT *</p>
<p>FROM Student </p>
<p>WHERE Sage &lt;= 19;</p>
</li>
</ul>
</li>
</ul>
<p>聚集函数的一般模式</p>
<ul>
<li>Count</li>
<li>sum</li>
<li>avg</li>
<li>max</li>
<li>min</li>
</ul>
<h2 id="12-数据更新"><a href="#12-数据更新" class="headerlink" title="12.数据更新"></a>12.数据更新</h2><ul>
<li>增</li>
<li>删</li>
<li>改</li>
</ul>
<ul>
<li><p>增</p>
</li>
<li><p>两种插入数据方式</p>
<ul>
<li><p>插入元组 </p>
<ul>
<li><p>插入数据举例</p>
<ul>
<li><p>将一个新生元组学号:201215128,姓名:陈冬,性别:男,所在系:is,年龄:18—-&gt;插入到Student表中</p>
</li>
<li><p>insert</p>
<p>INTO student (Sno,Sname,Ssex,Sdept,Sage)</p>
<p>VALUES(‘201215128,’陈冬’,’男’,18</p>
</li>
<li><p>关键字into就是插入的元素种类</p>
<p>关键字VALUES就是插入的具体内容</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>插入子查询结果</p>
<ul>
<li><p>可以一次插入多个元组</p>
</li>
<li><p>插入子查询结果举例</p>
<ul>
<li><p>建表</p>
<ul>
<li><p>CREATE TABLE Dept_age</p>
<p>(Sdept    CHAR(15)</p>
<p>Avg_age SMALLINT);</p>
</li>
</ul>
</li>
<li><p>插入数据</p>
<ul>
<li><p>INSERT INTO Dept_age(Sdept,Avg_age)     //插入以下查询结果</p>
<p>select Sdept,AVG(Sage)</p>
<p>FROM Student </p>
<p>Group by Sdept</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>改</p>
</li>
<li><p>update关键字</p>
</li>
<li><p>举例</p>
<ul>
<li><p>将学生201215121的年龄改成22岁 </p>
</li>
<li><p>update Student</p>
<p>set Sage= ‘22’</p>
<p>where SNO = ‘201215121’</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>删除</p>
</li>
<li><p>关键字delete</p>
<ul>
<li><p>delete from</p>
<p>where &lt;条件&gt;</p>
</li>
</ul>
</li>
<li><p>举例</p>
<ul>
<li><p>删除学号为201215121的学生记录</p>
<p>delete FROM stduent</p>
<p>where Sno = ‘201215121’</p>
</li>
</ul>
</li>
</ul>
<h2 id="13-视图"><a href="#13-视图" class="headerlink" title="13.视图"></a>13.视图</h2><ul>
<li><p>视图的特点</p>
<ul>
<li><p>视图是一种虚拟的表</p>
</li>
<li><p>形式上和表一致</p>
</li>
<li><p>不是用create table来一个字段一个字段定义的</p>
</li>
<li><p>使用sql的SELECT 来定义的</p>
</li>
<li><p>所以视图是一种虚表,普通表是实表</p>
</li>
<li><p>视图由一个或者几个普通表构建的</p>
<ul>
<li>视图中只存放视图的定义,不存放视图的数据</li>
</ul>
</li>
<li><p>视图举例</p>
<ul>
<li><p>建立信息系的学生的视图</p>
<ul>
<li><p>Creat VIEW IS_STUDENT</p>
<p>AS </p>
<p>SELECT Sno,Sname,Sage</p>
<p>FROM STUDENT</p>
<p>WHERE Sdept = ‘IS’</p>
<p>WITH CHECK OPTION;</p>
</li>
</ul>
</li>
<li><p>建立信息系选修了1号课程的学生的视图(包括学号,姓名,成绩)</p>
</li>
<li><p>CREATE VIEW IS_S1(Sno,Sname,Grade)</p>
<p>AS</p>
<p>SELECT  Student.sno,Sname,Grade</p>
<p>FROM  Student,SC</p>
<p>WHERE Sdept = ‘IS’  And </p>
<p>​                Student.Sno=SC.Sno AND</p>
<p>​                SC.Cno = ‘1’</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>视图消解法</p>
<ul>
<li><p>进行有效性检查</p>
</li>
<li><p>转换成等价的对基本表的查询</p>
<ul>
<li><p>转换举例</p>
<ul>
<li><p>SELECT Sno,Sage</p>
<p>From IS_Student</p>
<p>WHERE SAGE  &lt; 20;</p>
</li>
<li><p>转换为</p>
<p>SELECT Sno,Sage</p>
<p>FROM STUDENT </p>
<p>WHERE Sdept = ‘IS’  AND Sage &lt;  20;</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            <hr>
          </div>
          <br>
          <div>
            <p>
            
              <span>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/3.%E8%AF%BE%E7%A8%8B">3.课程</a>
                  &nbsp;
                
              </span>&nbsp;&nbsp;
            
            
              <span>
                <i class="iconfont icon-tag"></i>
                
                  <a class="hover-with-bg" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93">数据库</a>
                
                  <a class="hover-with-bg" href="/tags/sql">sql</a>
                
              </span>
            
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>

    
  
    <!-- 不蒜子统计PV -->
    
    &nbsp;<span id="busuanzi_container_site_pv">总访问量 
          <span id="busuanzi_value_site_pv"></span> 次</span>&nbsp;
  
  
    <!-- 不蒜子统计UV -->
    
    &nbsp;<span id="busuanzi_container_site_uv">总访客数 
            <span id="busuanzi_value_site_uv"></span> 人</span>&nbsp;
  
  <br>



    

  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>




  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>



  <script src="/lib/smooth-scroll/smooth-scroll.min.js" ></script>



  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


<!-- Plugins -->


  

  

  

  

  




  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "3.课程/数据库_概论&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 120,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>







</body>
</html>
